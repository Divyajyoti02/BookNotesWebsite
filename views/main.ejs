<%- include("partials/header.ejs") %>

<div id="content-container color-2">
    <h1 class="color-1 center">Your book note entries</h1>
    <% if (noteEntries.length === 0) { %>
        <span class="center margin-tb">You have no entries, please create an entry by searching your favorite book.</span>
    <% } else { %>
        <% noteEntries.forEach(noteEntry => { %>
            <div class="description-container margin-tb">
                <div class="img-container"><img src="https://covers.openlibrary.org/b/ID/<%= noteEntry.cover_id %>-M.jpg"></div>
                <div class="description-content">
                    <h3 class="color-1"><%= noteEntry.book_name %></h3>
                    <h4 class="color-2 author-names"><%= noteEntry.author %></h4>
                    <p><%= noteEntry.description %></p>
                </div>
            </div>
        <% }) %>
    <% } %>
</div>

<script>
    let noteEntries = document.getElementsByClassName("description-container");
    for (let i = 0; i < noteEntries.length; i++) {
        let noteEntry = noteEntries[i];
        let author_heading = noteEntry.getElementsByClassName("author-names")[0];
        let author_list = author_heading.innerHTML;
        let author_string = JSON.parse(`[${author_list.substring(1, author_list.length - 1)}]`).join(", ");
        author_heading.innerHTML = author_string;
    }
</script>

<%- include("partials/footer.ejs") %>